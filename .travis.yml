language: node_js
node_js: stable
sudo: false

matrix:
    include:
        - env: PROJECT=packages/jbrowse-web
        - env: PROJECT=packages/generator-jbrowse
cache:
    - node_modules
    - packages/jbrowse-web/node_modules
    - packages/generator-jbrowse/node_modules
install:
    - npm install -g yarn
    - yarn
    - node_modules/.bin/lerna bootstrap --npm-client yarn
script:
    - set -e
    - if .travis/build-condition.sh $TRAVIS_COMMIT_RANGE $PROJECT; then cd $PROJECT && . .travis.sh; else echo "$PROJECT is NOT being built"; fi
